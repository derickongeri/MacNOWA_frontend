import{bE as _,r as d,c as x,aQ as q,aI as $,a6 as V,a7 as t,Q as r,j as a,db as c,bb as m,bH as k,bF as p,P as j,K as E,bJ as P,da as B}from"./index.8c2cb255.js";import{i as I}from"./DJI_00371.e3907554.js";import{u as Q}from"./useNotify.27f6b01a.js";const z={class:"absolute-center q-pa-md bg-white login-card text-center"},C={class:"row text-h4 text-left justify-center text-primary",style:{"font-weight":"400"}},S={style:{margin:"auto","min-width":"25vw"},class:"q-pt-lg"},U={style:{"font-weight":"400"},class:"text-left text-grey-7"},L={class:"row q-pa-xs",style:{"min-width":"25vw"}},N={style:{"font-weight":"400"},class:"text-left text-grey-7 q-mt-md"},F={class:"row q-pa-xs",style:{"min-width":"25vw"}},R={class:"row justify-center full-width q-px-xl text-grey-7",style:{"font-weight":"400","font-size":"medium"}},A={class:"row justify-center q-px-xl q-my-md"},D={class:"row justify-center items-center q-gutter-md full-width text-grey-7",style:{"font-weight":"400","font-size":"medium"}},H={class:""},T={__name:"login",setup(J){const{supabase:g}=B(),u=_(),{login:y,isLoggedIn:K,user:h}=P(),{notifyError:w,notifySuccess:f}=Q(),o=d({email:"",password:""}),v=async e=>{try{const{data:s,error:n}=await g.from("user_analytics").select("*").eq("email",e).single();return n?(u.push({name:"onboarding"}),null):s}catch(s){return console.error("Error:",s.message),null}},b=async()=>{try{await y(o.value),f("Login successfull!"),v(h.value.email),u.push({name:"dashboard"})}catch(e){w(e.message)}};x(()=>o.value.password&&o.value.password.length>0),d(!1);const i=d(!0);return(e,s)=>{const n=q("router-link");return $(),V("div",{class:"jumbotron",id:"hero",style:j([{backgroundImage:`url(${E(I)})`},{"min-width":"100vw","min-height":"95vh"}])},[t("div",z,[t("div",C,r(e.$t("login")),1),t("div",S,[t("div",U,r(e.$t("Emailaddress")),1),t("div",L,[a(c,{class:"q-px-none full-width",modelValue:o.value.email,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value.email=l),color:"grey-1","bg-color":"grey-1",type:"email",placeholder:"email@example.com*"},null,8,["modelValue"])]),t("div",N,r(e.$t("Password")),1),t("div",F,[a(c,{class:"full-width",type:i.value?"password":"text",modelValue:o.value.password,"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.password=l),"lazy-rules":"",color:"grey-1","bg-color":"grey-1",rules:[l=>l&&l.length>0||e.$t("required")]},{append:m(()=>[a(k,{name:i.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[1]||(s[1]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules"])])]),t("div",R,[a(p,{class:"",rounded:"","no-caps":"",unelevated:"",color:"white","text-color":"grey-7",label:e.$t("ForgotPassword"),to:"resetpassword"},null,8,["label"])]),t("div",A,[a(p,{class:"full-width text-h6",rounded:"","no-caps":"",unelevated:"",color:"primary",label:e.$t("login"),onClick:b},null,8,["label"])]),t("div",D,[t("div",null,r(e.$t("account")),1),a(n,{to:"signup"},{default:m(()=>[t("div",H,r(e.$t("Register")),1)]),_:1})])])],4)}}};export{T as default};
