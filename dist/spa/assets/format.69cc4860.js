import{bL as He,bN as Ae,cy as Fe,bP as Be,cz as Oe,c as C,ce as $e,g as ce,h as k,bH as ve,cA as je,bK as Ke,bS as Re,r as P,bR as Ne,c1 as we,ax as We,cn as ye,w as $,o as De,aA as se,cq as Qe,ct as Se,cB as xe,ck as Xe,ci as Ye,c7 as Ge,cC as Je,c8 as Ue,cu as Ie,c9 as Ze,cD as et,cc as tt,cE as lt,cF as ot,cp as it,cG as nt,cH as pe,cv as at,cI as rt,bM as ct,bg as st,cJ as ut,cK as ft,cL as dt,cl as vt,cM as ht,az as mt,aC as St,ay as gt}from"./index.8f98e293.js";import{c as bt}from"./selection.164a0fe9.js";const wt={xs:8,sm:10,md:14,lg:20,xl:24};var Rt=He({name:"QChip",props:{...Ae,...Fe,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:o}){const{proxy:{$q:l}}=ce(),a=Be(e,l),c=Oe(e,wt),s=C(()=>e.selected===!0||e.icon!==void 0),g=C(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),h=C(()=>e.iconRemove||l.iconSet.chip.remove),d=C(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),r=C(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(d.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),w=C(()=>{const b=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},H={...b,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||l.lang.label.remove};return{chip:b,remove:H}});function x(b){b.keyCode===13&&i(b)}function i(b){e.disable||(o("update:selected",!e.selected),o("click",b))}function v(b){(b.keyCode===void 0||b.keyCode===13)&&(Re(b),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function B(){const b=[];d.value===!0&&b.push(k("div",{class:"q-focus-helper"})),s.value===!0&&b.push(k(ve,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const H=e.label!==void 0?[k("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(k("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},je(t.default,H))),e.iconRight&&b.push(k(ve,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(k(ve,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...w.value.remove,onClick:v,onKeyup:v})),b}return()=>{if(e.modelValue===!1)return;const b={class:r.value,style:c.value};return d.value===!0&&Object.assign(b,w.value.chip,{onClick:i,onKeyup:x}),$e("div",b,B(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ke,e.ripple]])}}});const yt={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function xt({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:l,proxy:a,emit:c}=ce(),s=P(null);let g=null;function h(i){return s.value===null?!1:i===void 0||i.touches===void 0||i.touches.length<=1}const d={};o===void 0&&(Object.assign(d,{hide(i){a.hide(i)},toggle(i){a.toggle(i),i.qAnchorHandled=!0},toggleKey(i){Ne(i,13)===!0&&d.toggle(i)},contextClick(i){a.hide(i),we(i),We(()=>{a.show(i),i.qAnchorHandled=!0})},prevent:we,mobileTouch(i){if(d.mobileCleanup(i),h(i)!==!0)return;a.hide(i),s.value.classList.add("non-selectable");const v=i.target;ye(d,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),g=setTimeout(()=>{g=null,a.show(i),i.qAnchorHandled=!0},300)},mobileCleanup(i){s.value.classList.remove("non-selectable"),g!==null&&(clearTimeout(g),g=null),e.value===!0&&i!==void 0&&bt()}}),o=function(i=l.contextMenu){if(l.noParentEvent===!0||s.value===null)return;let v;i===!0?a.$q.platform.is.mobile===!0?v=[[s.value,"touchstart","mobileTouch","passive"]]:v=[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:v=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],ye(d,"anchor",v)});function r(){Qe(d,"anchor")}function w(i){for(s.value=i;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;o()}function x(){if(l.target===!1||l.target===""||a.$el.parentNode===null)s.value=null;else if(l.target===!0)w(a.$el.parentNode);else{let i=l.target;if(typeof l.target=="string")try{i=document.querySelector(l.target)}catch{i=void 0}i!=null?(s.value=i.$el||i,o()):(s.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return $(()=>l.contextMenu,i=>{s.value!==null&&(r(),o(i))}),$(()=>l.target,()=>{s.value!==null&&r(),x()}),$(()=>l.noParentEvent,i=>{s.value!==null&&(i===!0?r():o())}),De(()=>{x(),t!==!0&&l.modelValue===!0&&s.value===null&&c("update:modelValue",!1)}),se(()=>{g!==null&&clearTimeout(g),r()}),{anchorEl:s,canShow:h,anchorEvents:d}}function pt(e,t){const o=P(null);let l;function a(g,h){const d=`${h!==void 0?"add":"remove"}EventListener`,r=h!==void 0?h:l;g!==window&&g[d]("scroll",r,Se.passive),window[d]("scroll",r,Se.passive),l=h}function c(){o.value!==null&&(a(o.value),o.value=null)}const s=$(()=>e.noParentEvent,()=>{o.value!==null&&(c(),t())});return se(s),{localScrollTarget:o,unconfigureScrollTarget:c,changeScrollEvent:a}}const{notPassiveCapture:ne}=Se,Q=[];function ae(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=xe.length-1;for(;o>=0;){const l=xe[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=Q.length-1;l>=0;l--){const a=Q[l];if((a.anchorEl.value===null||a.anchorEl.value.contains(t)===!1)&&(t===document.body||a.innerRef.value!==null&&a.innerRef.value.contains(t)===!1))e.qClickOutside=!0,a.onClickOutside(e);else return}}function zt(e){Q.push(e),Q.length===1&&(document.addEventListener("mousedown",ae,ne),document.addEventListener("touchstart",ae,ne))}function ze(e){const t=Q.findIndex(o=>o===e);t>-1&&(Q.splice(t,1),Q.length===0&&(document.removeEventListener("mousedown",ae,ne),document.removeEventListener("touchstart",ae,ne)))}let qe,Ee;function Me(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function qt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ge={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ge[`${e}#ltr`]=e,ge[`${e}#rtl`]=e});function ke(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:ge[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function Et(e,t){let{top:o,left:l,right:a,bottom:c,width:s,height:g}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],l-=t[0],c+=t[1],a+=t[0],s+=t[0],g+=t[1]),{top:o,bottom:c,height:g,left:l,right:a,width:s,middle:l+(a-l)/2,center:o+(c-o)/2}}function Mt(e,t,o){let{top:l,left:a}=e.getBoundingClientRect();return l+=t.top,a+=t.left,o!==void 0&&(l+=o[1],a+=o[0]),{top:l,bottom:l+1,height:1,left:a,right:a+1,width:1,middle:a,center:l}}function kt(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Ce(e,t,o,l){return{top:e[o.vertical]-t[l.vertical],left:e[o.horizontal]-t[l.horizontal]}}function Ve(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ve(e,t+1)},10);return}const{targetEl:o,offset:l,anchorEl:a,anchorOrigin:c,selfOrigin:s,absoluteOffset:g,fit:h,cover:d,maxHeight:r,maxWidth:w}=e;if(Xe.is.ios===!0&&window.visualViewport!==void 0){const F=document.body.style,{offsetLeft:R,offsetTop:W}=window.visualViewport;R!==qe&&(F.setProperty("--q-pe-left",R+"px"),qe=R),W!==Ee&&(F.setProperty("--q-pe-top",W+"px"),Ee=W)}const{scrollLeft:x,scrollTop:i}=o,v=g===void 0?Et(a,d===!0?[0,0]:l):Mt(a,g,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:w||"100vw",maxHeight:r||"100vh",visibility:"visible"});const{offsetWidth:B,offsetHeight:b}=o,{elWidth:H,elHeight:L}=h===!0||d===!0?{elWidth:Math.max(v.width,B),elHeight:d===!0?Math.max(v.height,b):b}:{elWidth:B,elHeight:b};let q={maxWidth:w,maxHeight:r};(h===!0||d===!0)&&(q.minWidth=v.width+"px",d===!0&&(q.minHeight=v.height+"px")),Object.assign(o.style,q);const p=kt(H,L);let E=Ce(v,p,c,s);if(g===void 0||l===void 0)he(E,v,p,c,s);else{const{top:F,left:R}=E;he(E,v,p,c,s);let W=!1;if(E.top!==F){W=!0;const V=2*l[1];v.center=v.top-=V,v.bottom-=V+2}if(E.left!==R){W=!0;const V=2*l[0];v.middle=v.left-=V,v.right-=V+2}W===!0&&(E=Ce(v,p,c,s),he(E,v,p,c,s))}q={top:E.top+"px",left:E.left+"px"},E.maxHeight!==void 0&&(q.maxHeight=E.maxHeight+"px",v.height>E.maxHeight&&(q.minHeight=q.maxHeight)),E.maxWidth!==void 0&&(q.maxWidth=E.maxWidth+"px",v.width>E.maxWidth&&(q.minWidth=q.maxWidth)),Object.assign(o.style,q),o.scrollTop!==i&&(o.scrollTop=i),o.scrollLeft!==x&&(o.scrollLeft=x)}function he(e,t,o,l,a){const c=o.bottom,s=o.right,g=Ye(),h=window.innerHeight-g,d=document.body.clientWidth;if(e.top<0||e.top+c>h)if(a.vertical==="center")e.top=t[l.vertical]>h/2?Math.max(0,h-c):0,e.maxHeight=Math.min(c,h);else if(t[l.vertical]>h/2){const r=Math.min(h,l.vertical==="center"?t.center:l.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(c,r),e.top=Math.max(0,r-c)}else e.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(c,h-e.top);if(e.left<0||e.left+s>d)if(e.maxWidth=Math.min(s,d),a.horizontal==="middle")e.left=t[l.horizontal]>d/2?Math.max(0,d-s):0;else if(t[l.horizontal]>d/2){const r=Math.min(d,l.horizontal==="middle"?t.middle:l.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(s,r),e.left=Math.max(0,r-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(s,d-e.left)}var Wt=He({name:"QMenu",inheritAttrs:!1,props:{...yt,...Ge,...Ae,...Je,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Me},self:{type:String,validator:Me},offset:{type:Array,validator:qt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ue,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){let a=null,c,s,g;const h=ce(),{proxy:d}=h,{$q:r}=d,w=P(null),x=P(!1),i=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),v=Be(e,r),{registerTick:B,removeTick:b}=Ie(),{registerTimeout:H}=Ze(),{transitionProps:L,transitionStyle:q}=et(e),{localScrollTarget:p,changeScrollEvent:E,unconfigureScrollTarget:F}=pt(e,S),{anchorEl:R,canShow:W}=xt({showing:x}),{hide:V}=tt({showing:x,canShow:W,handleShow:te,handleHide:f,hideOnRouteChange:i,processOnMount:!0}),{showPortal:j,hidePortal:ee,renderPortal:X}=lt(h,w,T,"menu"),K={anchorEl:R,innerRef:w,onClickOutside(n){if(e.persistent!==!0&&x.value===!0)return V(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&Re(n),!0}},J=C(()=>ke(e.anchor||(e.cover===!0?"center middle":"bottom start"),r.lang.rtl)),U=C(()=>e.cover===!0?J.value:ke(e.self||"top start",r.lang.rtl)),O=C(()=>(e.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),ue=C(()=>e.autoClose===!0?{onClick:z}:{}),I=C(()=>x.value===!0&&e.persistent!==!0);$(I,n=>{n===!0?(ut(y),zt(K)):(pe(y),ze(K))});function N(){ft(()=>{let n=w.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function te(n){if(a=e.noRefocus===!1?document.activeElement:null,ot(M),j(),S(),c=void 0,n!==void 0&&(e.touchPosition||e.contextMenu)){const A=it(n);if(A.left!==void 0){const{top:Y,left:le}=R.value.getBoundingClientRect();c={left:A.left-le,top:A.top-Y}}}s===void 0&&(s=$(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,m)),e.noFocus!==!0&&document.activeElement.blur(),B(()=>{m(),e.noFocus!==!0&&N()}),H(()=>{r.platform.is.ios===!0&&(g=e.autoClose,w.value.click()),m(),j(!0),o("show",n)},e.transitionDuration)}function f(n){b(),ee(),u(!0),a!==null&&(n===void 0||n.qClickOutside!==!0)&&(((n&&n.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),H(()=>{ee(!0),o("hide",n)},e.transitionDuration)}function u(n){c=void 0,s!==void 0&&(s(),s=void 0),(n===!0||x.value===!0)&&(nt(M),F(),ze(K),pe(y)),n!==!0&&(a=null)}function S(){(R.value!==null||e.scrollTarget!==void 0)&&(p.value=at(R.value,e.scrollTarget),E(p.value,m))}function z(n){g!==!0?(rt(d,n),o("click",n)):g=!1}function M(n){I.value===!0&&e.noFocus!==!0&&dt(w.value,n.target)!==!0&&N()}function y(n){o("escapeKey"),V(n)}function m(){Ve({targetEl:w.value,offset:e.offset,anchorEl:R.value,anchorOrigin:J.value,selfOrigin:U.value,absoluteOffset:c,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function T(){return k(st,L.value,()=>x.value===!0?k("div",{role:"menu",...l,ref:w,tabindex:-1,class:["q-menu q-position-engine scroll"+O.value,l.class],style:[l.style,q.value],...ue.value},ct(t.default)):null)}return se(u),Object.assign(d,{focus:N,updatePosition:m}),X}});let re=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,re=e.scrollLeft>=0,e.remove()}const _=1e3,Ct=["start","center","end","start-force","center-force","end-force"],Pe=Array.prototype.filter,Tt=window.getComputedStyle(document.body).overflowAnchor===void 0?vt:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];Pe.call(o,a=>a.dataset&&a.dataset.qVsAnchor!==void 0).forEach(a=>{delete a.dataset.qVsAnchor});const l=o[t];l&&l.dataset&&(l.dataset.qVsAnchor="")}))};function G(e,t){return e+t}function me(e,t,o,l,a,c,s,g){const h=e===window?document.scrollingElement||document.documentElement:e,d=a===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-s-g,scrollMaxSize:0,offsetStart:-s,offsetEnd:-g};if(a===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=h.scrollLeft,r.scrollViewSize+=h.clientWidth),r.scrollMaxSize=h.scrollWidth,c===!0&&(r.scrollStart=(re===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=h.scrollTop,r.scrollViewSize+=h.clientHeight),r.scrollMaxSize=h.scrollHeight),o!==null)for(let w=o.previousElementSibling;w!==null;w=w.previousElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=w[d]);if(l!==null)for(let w=l.nextElementSibling;w!==null;w=w.nextElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=w[d]);if(t!==e){const w=h.getBoundingClientRect(),x=t.getBoundingClientRect();a===!0?(r.offsetStart+=x.left-w.left,r.offsetEnd-=x.width):(r.offsetStart+=x.top-w.top,r.offsetEnd-=x.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function Te(e,t,o,l){t==="end"&&(t=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(l===!0&&(t=(re===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):o===!0?(l===!0&&(t=(re===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Z(e,t,o,l){if(o>=l)return 0;const a=t.length,c=Math.floor(o/_),s=Math.floor((l-1)/_)+1;let g=e.slice(c,s).reduce(G,0);return o%_!==0&&(g-=t.slice(c*_,o).reduce(G,0)),l%_!==0&&l!==a&&(g-=t.slice(l,s*_).reduce(G,0)),g}const Ht={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Vt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ht};function Pt({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:o,virtualScrollItemSizeComputed:l}){const a=ce(),{props:c,emit:s,proxy:g}=a,{$q:h}=g;let d,r,w,x=[],i;const v=P(0),B=P(0),b=P({}),H=P(null),L=P(null),q=P(null),p=P({from:0,to:0}),E=C(()=>c.tableColspan!==void 0?c.tableColspan:100);l===void 0&&(l=C(()=>c.virtualScrollItemSize));const F=C(()=>l.value+";"+c.virtualScrollHorizontal),R=C(()=>F.value+";"+c.virtualScrollSliceRatioBefore+";"+c.virtualScrollSliceRatioAfter);$(R,()=>{O()}),$(F,W);function W(){U(r,!0)}function V(f){U(f===void 0?r:f)}function j(f,u){const S=t();if(S==null||S.nodeType===8)return;const z=me(S,o(),H.value,L.value,c.virtualScrollHorizontal,h.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd);w!==z.scrollViewSize&&O(z.scrollViewSize),X(S,z,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,Ct.indexOf(u)>-1?u:r>-1&&f>r?"end":"start")}function ee(){const f=t();if(f==null||f.nodeType===8)return;const u=me(f,o(),H.value,L.value,c.virtualScrollHorizontal,h.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd),S=e.value-1,z=u.scrollMaxSize-u.offsetStart-u.offsetEnd-B.value;if(d===u.scrollStart)return;if(u.scrollMaxSize<=0){X(f,u,0,0);return}w!==u.scrollViewSize&&O(u.scrollViewSize),K(p.value.from);const M=Math.floor(u.scrollMaxSize-Math.max(u.scrollViewSize,u.offsetEnd)-Math.min(i[S],u.scrollViewSize/2));if(M>0&&Math.ceil(u.scrollStart)>=M){X(f,u,S,u.scrollMaxSize-u.offsetEnd-x.reduce(G,0));return}let y=0,m=u.scrollStart-u.offsetStart,T=m;if(m<=z&&m+u.scrollViewSize>=v.value)m-=v.value,y=p.value.from,T=m;else for(let n=0;m>=x[n]&&y<S;n++)m-=x[n],y+=_;for(;m>0&&y<S;)m-=i[y],m>-u.scrollViewSize?(y++,T=m):T=i[y]+m;X(f,u,y,T)}function X(f,u,S,z,M){const y=typeof M=="string"&&M.indexOf("-force")>-1,m=y===!0?M.replace("-force",""):M,T=m!==void 0?m:"start";let n=Math.max(0,S-b.value[T]),A=n+b.value.total;A>e.value&&(A=e.value,n=Math.max(0,A-b.value.total)),d=u.scrollStart;const Y=n!==p.value.from||A!==p.value.to;if(Y===!1&&m===void 0){I(S);return}const{activeElement:le}=document,D=q.value;Y===!0&&D!==null&&D!==le&&D.contains(le)===!0&&(D.addEventListener("focusout",J),setTimeout(()=>{D!==null&&D.removeEventListener("focusout",J)})),Tt(D,S-n);const _e=m!==void 0?i.slice(n,S).reduce(G,0):0;if(Y===!0){const oe=A>=p.value.from&&n<=p.value.to?p.value.to:A;p.value={from:n,to:oe},v.value=Z(x,i,0,n),B.value=Z(x,i,A,e.value),requestAnimationFrame(()=>{p.value.to!==A&&d===u.scrollStart&&(p.value={from:p.value.from,to:A},B.value=Z(x,i,A,e.value))})}requestAnimationFrame(()=>{if(d!==u.scrollStart)return;Y===!0&&K(n);const oe=i.slice(n,S).reduce(G,0),ie=oe+u.offsetStart+v.value,be=ie+i[S];let fe=ie+z;if(m!==void 0){const Le=oe-_e,de=u.scrollStart+Le;fe=y!==!0&&de<ie&&be<de+u.scrollViewSize?de:m==="end"?be-u.scrollViewSize:ie-(m==="start"?0:Math.round((u.scrollViewSize-i[S])/2))}d=fe,Te(f,fe,c.virtualScrollHorizontal,h.lang.rtl),I(S)})}function K(f){const u=q.value;if(u){const S=Pe.call(u.children,n=>n.classList&&n.classList.contains("q-virtual-scroll--skip")===!1),z=S.length,M=c.virtualScrollHorizontal===!0?n=>n.getBoundingClientRect().width:n=>n.offsetHeight;let y=f,m,T;for(let n=0;n<z;){for(m=M(S[n]),n++;n<z&&S[n].classList.contains("q-virtual-scroll--with-prev")===!0;)m+=M(S[n]),n++;T=m-i[y],T!==0&&(i[y]+=T,x[Math.floor(y/_)]+=T),y++}}}function J(){q.value!==null&&q.value!==void 0&&q.value.focus()}function U(f,u){const S=1*l.value;(u===!0||Array.isArray(i)===!1)&&(i=[]);const z=i.length;i.length=e.value;for(let y=e.value-1;y>=z;y--)i[y]=S;const M=Math.floor((e.value-1)/_);x=[];for(let y=0;y<=M;y++){let m=0;const T=Math.min((y+1)*_,e.value);for(let n=y*_;n<T;n++)m+=i[n];x.push(m)}r=-1,d=void 0,v.value=Z(x,i,0,p.value.from),B.value=Z(x,i,p.value.to,e.value),f>=0?(K(p.value.from),We(()=>{j(f)})):N()}function O(f){if(f===void 0&&typeof window!="undefined"){const m=t();m!=null&&m.nodeType!==8&&(f=me(m,o(),H.value,L.value,c.virtualScrollHorizontal,h.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd).scrollViewSize)}w=f;const u=parseFloat(c.virtualScrollSliceRatioBefore)||0,S=parseFloat(c.virtualScrollSliceRatioAfter)||0,z=1+u+S,M=f===void 0||f<=0?1:Math.ceil(f/l.value),y=Math.max(1,M,Math.ceil((c.virtualScrollSliceSize>0?c.virtualScrollSliceSize:10)/z));b.value={total:Math.ceil(y*z),start:Math.ceil(y*u),center:Math.ceil(y*(.5+u)),end:Math.ceil(y*(1+u)),view:M}}function ue(f,u){const S=c.virtualScrollHorizontal===!0?"width":"height",z={["--q-virtual-scroll-item-"+S]:l.value+"px"};return[f==="tbody"?k(f,{class:"q-virtual-scroll__padding",key:"before",ref:H},[k("tr",[k("td",{style:{[S]:`${v.value}px`,...z},colspan:E.value})])]):k(f,{class:"q-virtual-scroll__padding",key:"before",ref:H,style:{[S]:`${v.value}px`,...z}}),k(f,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},u.flat()),f==="tbody"?k(f,{class:"q-virtual-scroll__padding",key:"after",ref:L},[k("tr",[k("td",{style:{[S]:`${B.value}px`,...z},colspan:E.value})])]):k(f,{class:"q-virtual-scroll__padding",key:"after",ref:L,style:{[S]:`${B.value}px`,...z}})]}function I(f){r!==f&&(c.onVirtualScroll!==void 0&&s("virtualScroll",{index:f,from:p.value.from,to:p.value.to-1,direction:f<r?"decrease":"increase",ref:g}),r=f)}O();const N=ht(ee,h.platform.is.ios===!0?120:35);mt(()=>{O()});let te=!1;return St(()=>{te=!0}),gt(()=>{if(te!==!0)return;const f=t();d!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?Te(f,d,c.virtualScrollHorizontal,h.lang.rtl):j(r)}),se(()=>{N.cancel()}),Object.assign(g,{scrollTo:j,reset:W,refresh:V}),{virtualScrollSliceRange:p,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:O,onVirtualScrollEvt:N,localResetVirtualScroll:U,padVirtualScroll:ue,scrollTo:j,reset:W,refresh:V}}function _t(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}function Lt(e,t,o){if(o<=t)return t;const l=o-t+1;let a=t+(e-t)%l;return a<t&&(a=l+a),a===0?0:a}function Ft(e,t=2,o="0"){if(e==null)return e;const l=""+e;return l.length>=t?l:new Array(t-l.length+1).join(o)+l}export{Wt as Q,Pt as a,Rt as b,_t as c,yt as d,qt as e,pt as f,xt as g,ze as h,zt as i,Ft as j,Lt as n,ke as p,re as r,Ve as s,Vt as u,Me as v};
