import{bE as S,r,o as R,c as A,w as O,aI as d,a6 as m,a7 as t,Q as i,j as a,db as u,F as k,aO as E,dg as g,a4 as F,a5 as _,bF as M,da as I}from"./index.54040dac.js";import{Q as w}from"./QSelect.11f9ea61.js";import{u as $}from"./useNotify.c0040424.js";import{r as c}from"./institutions.44505cc1.js";import"./selection.1be3b56c.js";const Q={id:"onboarding",style:{"min-width":"100vw","min-height":"100vh"}},B=t("div",{class:"q-pa-md"},null,-1),P={class:"q-pa-md bg-white onboarding-card",style:{position:"relative",margin:"auto"}},T={class:"column items-center"},D=t("div",{class:"row q-ma-md text-h4 text-left text-primary",style:{"font-weight":"400",width:"80%"}}," Profile Infromation ",-1),L=t("div",{class:"row text-left q-ma-md",style:{"font-weight":"400",width:"80%"}}," We use this information to make MarCNoWA geoportal more useful for you. Your privacy is important to us and we'll never share your personal information without your consent. ",-1),Y={style:{"min-width":"25vw"},class:"q-pt-lg q-mx-md"},j={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},W={class:"row q-gutter-md q-pa-xs q-mb-md"},G={class:"col-8"},J={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},Z={class:"row q-gutter-md q-pa-xs q-mb-md"},H={class:"col-8"},K={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},X={class:"row q-gutter-md q-pa-xs q-mb-md",style:{"min-width":"25vw"}},ee={class:"col-8"},te={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},le={class:"row q-pa-xs q-mb-md",style:{"min-width":"25vw"}},oe={class:"col-8"},se={key:0,class:"q-px-lg"},ae=t("div",null,"Role*",-1),re={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},ne={class:"row q-pa-xs q-mb-md",style:{"min-width":"25vw"}},ie={class:"col-8"},de={style:{"font-weight":"700","font-size":"0.85em"},class:"text-left text-grey-9"},ue={class:"row q-pa-xs q-mb-md",style:{"min-width":"25vw"}},me={class:"col-8"},ce={class:"row justify-center q-px-xl q-my-md"},ve=t("div",{class:"col"},null,-1),pe={class:"col-4"},qe={__name:"onboarding",setup(ye){const q=S(),{supabase:v}=I(),{notifyError:p,notifySuccess:V}=$();r("");const e=r({email:"",firstName:"",lastName:"",Country:"",organization:"",role:"",sector:""}),y=r([]),h=r([]),n=r(null),N=r(null);function b(o){return o.sectors.map(s=>s.sector)}const x=o=>o.countries.map(s=>s.name),z=async()=>{const{data:o,error:s}=await v.auth.getSession();return s?(console.error("Error fetching user data:",s.message),null):(console.log(o.session.user),e.value.firstName=o.session.user.user_metadata.firstName,e.value.lastName=o.session.user.user_metadata.lastName,e.value.email=o.session.user.email,o.session.user)};R(()=>{y.value=b(c),h.value=x(c),z()}),A(()=>e.value.password&&e.value.password.length>0);const C=async()=>{if(e.value.email&&e.value.Country)try{const{data:o,error:s}=await v.from("user_analytics").insert([{email:e.value.email,firstName:e.value.firstName,lastName:e.value.lastName,country:e.value.Country,organization:e.value.organization,role:e.value.role,sector:e.value.sector}]);V("User Profile Created"),q.push({name:"home"})}catch(o){p(o.message)}else p("Please fill in the required fields")};r(!1),r(!0),O(e.value.sector,()=>{n.value=c.sectors.find(o=>o.sector===e.value.sector),console.log(n)});const f=()=>{n.value=c.sectors.find(o=>o.sector===e.value.sector),console.log(n),N.value=null};return(o,s)=>(d(),m("div",Q,[B,t("div",P,[t("div",T,[D,L,t("div",Y,[t("div",j,i(o.$t("FIRST NAME")),1),t("div",W,[t("div",G,[a(u,{class:"q-px-none full-width",modelValue:e.value.firstName,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.firstName=l),color:"grey-1","bg-color":"grey-1",type:"email",placeholder:"Firstname",readonly:""},null,8,["modelValue"])])]),t("div",J,i(o.$t("LAST NAME/ SURNAME")),1),t("div",Z,[t("div",H,[a(u,{class:"q-px-none full-width",modelValue:e.value.lastName,"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.lastName=l),color:"grey-1","bg-color":"grey-1",type:"email",placeholder:"Lastname",readonly:""},null,8,["modelValue"])])]),t("div",K,i(o.$t("EMAIL")),1),t("div",X,[t("div",ee,[a(u,{class:"q-px-none full-width",modelValue:e.value.email,"onUpdate:modelValue":s[2]||(s[2]=l=>e.value.email=l),color:"grey-1","bg-color":"grey-1",type:"email",placeholder:"example@mail.com*",readonly:""},null,8,["modelValue"])])]),t("div",te,i(o.$t("SECTOR")),1),t("div",le,[t("div",oe,[t("div",null,[a(w,{dense:"",modelValue:e.value.sector,"onUpdate:modelValue":[s[3]||(s[3]=l=>e.value.sector=l),f],options:y.value,"emit-value":"","map-options":"","lazy-rules":"",rules:[l=>l&&l.length>0||"Field is required *"]},null,8,["modelValue","options","rules"])]),n.value?(d(),m("div",se,[ae,(d(!0),m(k,null,E(n.value.roles,l=>(d(),m("div",{key:l},[a(g,{modelValue:e.value.role,"onUpdate:modelValue":U=>e.value.role=U,label:l,val:l},null,8,["modelValue","onUpdate:modelValue","label","val"])]))),128)),a(g,{modelValue:e.value.role,"onUpdate:modelValue":s[4]||(s[4]=l=>e.value.role=l),val:"Other",label:"Other"},null,8,["modelValue"]),e.value.role==="Other"?(d(),F(u,{key:0,dense:"",modelValue:e.value.otherRoles,"onUpdate:modelValue":s[5]||(s[5]=l=>e.value.otherRoles=l),label:"Describe your role/work"},null,8,["modelValue"])):_("",!0)])):_("",!0)])]),t("div",re,i(o.$t("COMPANY / ORGANIZATION")),1),t("div",ne,[t("div",ie,[t("div",null,[a(u,{dense:"",modelValue:e.value.organization,"onUpdate:modelValue":s[6]||(s[6]=l=>e.value.organization=l),label:"Company / Organization / Agency Name","lazy-rules":"",rules:[l=>l&&l.length>0||"Field is required *"]},null,8,["modelValue","rules"])])])]),t("div",de,i(o.$t("COUNTRY")),1),t("div",ue,[t("div",me,[t("div",null,[a(w,{dense:"",modelValue:e.value.Country,"onUpdate:modelValue":[s[7]||(s[7]=l=>e.value.Country=l),f],options:h.value,"emit-value":"","map-options":"","lazy-rules":"",rules:[l=>l&&l.length>0||"Field is required *"]},null,8,["modelValue","options","rules"])])])])])]),t("div",ce,[ve,t("div",pe,[a(M,{class:"full-width text-h6",rounded:"",dense:"","no-caps":"",unelevated:"",color:"primary",label:o.$t("Save"),onClick:C},null,8,["label"])])])])]))}};export{qe as default};
